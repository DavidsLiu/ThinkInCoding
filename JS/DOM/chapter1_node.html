<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>node</title>
  <style media="screen">
    .demo {
      position: relative;
      width: 500px;
      height: 300px;
      background-color: red;
      margin: 50px auto;
      border: 1px solid red;
    }
    .item {
      position: relative;
      width: 100px;
      height: 100px;
      margin: 100px 200px;
      background-color: yellow;
    }
    .hiden {
      display: none;
    }
    .demo1 {
      position: relative;
      width: 100px;
      height: 100px;
      background-color: rgb(123,23,222);
    }
    .demo2 {
      position: relative;
      width: 100px;
      height: 100px;
      background-color: rgb(123,223,222);
    }
  </style>
</head>
<body>
  <div class="pre" id="pre"></div>
  <div class="demo" id="test">
    <p class="hiden">hello</p>
    <div class="item" id="item">world</div>
  </div>
  <div class="next"></div>
  <script type="text/javascript">
    /**
     * node不一定是Element 但是element一定是node
     */
    const txt = document.createTextNode('some');
    const attr = document.createAttribute('id');
    attr.value = "demoid";
    const el = document.createElement('div');

    const item = document.getElementById('item');
    const pre = document.getElementById('pre');
    const pel = document.getElementById('test');

    console.log(el.nodeName); //大写
    console.log(attr.nodeName);
    console.log(txt.nodeName);  //#text
    console.log(document.nodeName); // #document

    console.log(el.nodeValue); //null
    console.log(attr.nodeValue);
    console.log(txt.nodeValue);
    console.log(document.nodeValue); //null

    /**
     * nodeType
     * 1 元素
     * 2 属性
     * 3 文本
     * 8 注释
     * 9 文档
     */
    console.log("-------------------- 子节点   --------------------");
    if (pel.hasChildNodes()) {
      Array.from(pel.childNodes).forEach(function (item) {
        console.log(item);
      });
    }
    /**
     * 输出的结果
     * #text
     * div
     * #text
     *
     * 这里换行符算作了文本节点
     */


    console.log("--------------------- 首尾子节点  ---------------------------");
    console.log(pel.firstChild); // #text
    console.log(pel.firstElementChild);
    console.log(pel.lastChild); //#text
    console.log(pel.lastElementChild);


    console.log('----------------- 兄弟节点 ----------------------');
    console.log(pel.nextSibling); // #text
    console.log(pel.nextElementSibling);

    console.log(pel.previousSibling); //#text
    console.log(pel.previousElementSibling);

    console.log("-------------- parentNode parentElement -------------------");
    /**
     * 大部分情况下两者相同 如果parentNode不是element 则 parentElement为null
     */
    console.log(document.body.parentNode.nodeName);
    console.log(document.body.parentElement.nodeName);

    console.log(document.documentElement.parentNode);
    console.log(document.documentElement.parentElement);

    console.log("---------------------  textContent  -------------------------");
    console.log(pel.textContent);
    console.log(pel.innerText); // 通过 css js 隐藏的文字不会显示出来


    /**
     * 添加节点
     */
    // const newElement = document.createElement('div');
    // newElement.className = "demo1";
    // document.body.appendChild(newElement);

    /**
     * 节点 false表示不包含子节点
     */
    const noChild = pel.cloneNode(false);
    const hasChild = pel.cloneNode(true);

    console.log(noChild);
    console.log(hasChild);

    /**
     * 插入
     */
    const newPre = document.createElement('div');
    newPre.className = "demo2";

    // pel.parentNode.insertBefore(newPre, pel);


    insertAfter(newPre, pel);
    function insertAfter(newElement, target) {
      if (target.nextElementSibling === null) {
        target.parentNode.appendChild(newElement);
        return;
      }
      target = target.nextElementSibling;
      target.parentNode.insertBefore(newElement, target);
    }

    /**
     * 判断两个节点是否相等
     * node.isEqualNode(otherNode) 只判断类型特性是否相等
     * node.isSameNode(otherNode)  ===
     */
    console.log("---------------------- 判断节点相等 -----------------------------");
    const demo1 = document.createElement('div');
    demo1.className = "some";
    const demo2 = document.createElement('div');
    demo2.className = 'some';
    const demo3 = document.createElement('div');
    demo3.className = "ok";
    console.log(demo1.isEqualNode(demo1));
    console.log(demo1.isEqualNode(demo2));
    console.log(demo1.isEqualNode(demo3));

    console.log(demo1.isSameNode(demo1));
    console.log(demo1.isSameNode(demo2));
    console.log(demo1.isSameNode(demo3));

    const demo4 = demo1.cloneNode(true);
    console.log(demo4.isSameNode(demo1));

    /**
     * 移除
     * remove() 连自己也删除
     * removeChild() 删除子节点
     * contains() 判断是否含有子节点
     */

    // if (pel.contains(item)) {
    //   pel.removeChild(item);
    // }

    /**
     * 替换  target.parentNode.replaceChild(newElement, target);
     */
    // item.parentNode.replaceChild(newPre, item);


  </script>
</body>
</html>
